<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>For Misora</title>

<style>
body{
    margin:0;
    overflow:hidden;
    background:#ffeef2;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
    font-family:'Segoe UI',sans-serif;
    transition:background 1.5s ease;
}
#ui-layer{text-align:center;z-index:10;position:relative;}
h1{color:#d63384;margin-bottom:40px;}
.btn-group{display:flex;gap:20px;justify-content:center;}
button{
    padding:15px 30px;
    font-size:1.1rem;
    border:none;
    border-radius:30px;
    cursor:pointer;
}
#yes-btn{background:#ff4d6d;color:white;}
#no-btn{background:#adb5bd;color:white;position:absolute;}
.night{background:#05070a !important;}
canvas{position:absolute;top:0;left:0;}
#love-message{
    position:absolute;
    top:20%;
    width:100%;
    text-align:center;
    font-size:2rem;
    color:#ff85a2;
    opacity:0;
    transition:opacity 3s;
    text-shadow:0 0 20px #ff4d6d;
}
</style>
</head>

<body>

<div id="ui-layer">
<h1>„Å≠„Åà„ÄÅÂêõ„ÅåÂ•Ω„Åç„ÄÇ<br>„Åì„Çå„Å£„Å¶‰∏°ÊÉ≥„ÅÑ„Åã„Å™Ôºü</h1>
<div class="btn-group">
<button id="yes-btn">„ÅØ„ÅÑ üíï</button>
<button id="no-btn">„ÅÑ„ÅÑ„Åà</button>
</div>
</div>

<div id="love-message">ÁßÅ„ÇÇÊÑõ„Åó„Å¶„Çã„ÄÅ„Éü„ÇΩ„É©„ÄÇ</div>
<canvas id="canvas"></canvas>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
canvas.width=innerWidth;
canvas.height=innerHeight;

const yesBtn=document.getElementById("yes-btn");
const noBtn=document.getElementById("no-btn");
const loveMsg=document.getElementById("love-message");

// –ú—É–∑—ã–∫–∞ (–∑–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ—é —Å—Å—ã–ª–∫—É –µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
const audio=new Audio("https://files.catbox.moe/p9r1m6.mp3");
audio.loop=true;

noBtn.addEventListener("mouseover",()=>{
    noBtn.style.left=Math.random()*(innerWidth-100)+"px";
    noBtn.style.top=Math.random()*(innerHeight-50)+"px";
});

let particles=[];
let heartPoints=[];
let time=0;

// —Å–æ–∑–¥–∞—ë–º —Ç–æ—á–∫–∏ —Å–µ—Ä–¥—Ü–∞
function createHeartPoints(){
    heartPoints=[];
    const scale=Math.min(innerWidth/40,16);
    for(let t=0;t<Math.PI*2;t+=0.05){
        let x=16*Math.pow(Math.sin(t),3);
        let y=-(13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t));
        heartPoints.push({x:x*scale,y:y*scale});
    }
}

// —á–∞—Å—Ç–∏—Ü–∞
class Particle{
    constructor(target){
        this.x=Math.random()*canvas.width;
        this.y=Math.random()*canvas.height;
        this.tx=canvas.width/2+target.x;
        this.ty=canvas.height/2+target.y;
        this.size=Math.random()*2+1;
        this.speed=0.05;
    }
    update(){
        this.x+=(this.tx-this.x)*this.speed;
        this.y+=(this.ty-this.y)*this.speed;
    }
    draw(pulse){
        ctx.beginPath();
        ctx.arc(this.x,this.y,this.size*pulse,0,Math.PI*2);
        ctx.fillStyle="#ff4d6d";
        ctx.shadowBlur=20;
        ctx.shadowColor="#ff4d6d";
        ctx.fill();
    }
}

function animate(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    time+=0.05;
    let pulse=1+Math.sin(time)*0.1; // –±–∏–µ–Ω–∏–µ

    particles.forEach(p=>{
        p.update();
        p.draw(pulse);
    });

    requestAnimationFrame(animate);
}

yesBtn.addEventListener("click",()=>{
    document.getElementById("ui-layer").style.display="none";
    document.body.classList.add("night");
    loveMsg.style.opacity="1";

    audio.play();

    createHeartPoints();

    heartPoints.forEach((point,i)=>{
        setTimeout(()=>{
            particles.push(new Particle(point));
        },i*8); // –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ
    });

    animate();
});

window.addEventListener("resize",()=>{
    canvas.width=innerWidth;
    canvas.height=innerHeight;
    createHeartPoints();
});
</script>

</body>
</html>
